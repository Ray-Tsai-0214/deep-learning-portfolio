# Kaggle #2: æ¨ç†å¤§èªè¨€æ¨¡å‹ - çµåˆæ¨ç†è³‡è¨Šçš„ç›£ç£å¼å¾®èª¿

[![HuggingFace æ¨¡å‹](https://img.shields.io/badge/ğŸ¤—%20HuggingFace-Model-yellow)](https://huggingface.co/RayTsai/chinese-reasoning-qwen2.5-7b)
[![Kaggle ç«¶è³½](https://img.shields.io/badge/Kaggle-Competition-blue)](https://www.kaggle.com/competitions/kaggle-2-reasoning-llm-sft-with-reasoning-information)

## ğŸ† ç«¶è³½æˆæœ

- **Private Score**: 0.72043
- **Public Score**: 0.47177  
- **æœ€çµ‚æ’å**: #30
- **é—œéµæˆå°±**: Privateåˆ†æ•¸é¡¯è‘—é«˜æ–¼Publicåˆ†æ•¸ï¼Œå±•ç¾å‡ºå„ªç•°çš„æ³›åŒ–èƒ½åŠ›

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

æ­¤å„²å­˜åº«åŒ…å«Kaggle #2ç«¶è³½çš„å®Œæ•´è§£æ±ºæ–¹æ¡ˆï¼Œå°ˆæ³¨æ–¼è¨“ç·´ä¸­æ–‡æ¨ç†å¤§èªè¨€æ¨¡å‹ä¾†è™•ç†æ•æ„Ÿæ”¿æ²»è­°é¡Œã€‚æˆ‘åœ¨é€™å€‹å°ˆæ¡ˆä¸­å¯¦ç¾äº†å¤šé …å‰µæ–°æ–¹æ³•ï¼ŒåŒ…æ‹¬çµæ§‹åŒ–æ¨ç†éˆã€è‡ªå‹•åŒ–æ•¸æ“šç”Ÿæˆå·¥ä½œæµç¨‹ï¼Œä»¥åŠå¤šæ¨¡å‹ç­–ç•¥ã€‚

## ğŸ¤— HuggingFace æ¨¡å‹

æˆ‘çš„æœ€ä½³æ€§èƒ½æ¨¡å‹å·²ç™¼å¸ƒåœ¨HuggingFaceä¸Šï¼š
**[RayTsai/chinese-reasoning-qwen2.5-7b](https://huggingface.co/RayTsai/chinese-reasoning-qwen2.5-7b)**

æ­¤æ¨¡å‹åœ¨ä¸­æ–‡æ”¿æ²»å’Œæ•æ„Ÿè­°é¡Œä¸Šå±•ç¾å‡ºå“è¶Šçš„æ¨ç†èƒ½åŠ›ï¼Œå…·å‚™çµæ§‹åŒ–æ¨ç†éˆç”ŸæˆåŠŸèƒ½ã€‚

## ğŸš€ é—œéµæŠ€è¡“å‰µæ–°

### 1. **çµæ§‹åŒ–æ¨ç†éˆ**
- XMLæ ¼å¼æ¨ç†çµæ§‹ï¼Œæå‡å¯è§£é‡‹æ€§
- å¤šæ­¥é©Ÿæ¨ç†éç¨‹ï¼ŒåŒ…å«åæ€èˆ‡èª¿æ•´éšæ®µ
- é‡å°æ•æ„Ÿæ”¿æ²»è­°é¡Œçš„ä¸­ç«‹æ€§å°å‘æ–¹æ³•

### 2. **N8N è‡ªå‹•åŒ–æ•¸æ“šç”Ÿæˆå·¥ä½œæµç¨‹**
- **ä¸‰å±¤åµŒå¥—å¾ªç’°æ¶æ§‹**: 15å€‹ä¸»é¡Œ Ã— 3å€‹é›£åº¦ç­‰ç´š Ã— 5ç¨®å•é¡Œé¡å‹
- **ç”Ÿæˆå®¹é‡**: æ¯é€±æœŸ675å€‹å•é¡Œ
- **å“è³ªä¿è­‰**: 95%ä»¥ä¸Šé©—è­‰é€šéç‡
- **å…¨å¤©å€™é€£çºŒé‹è¡Œ**èƒ½åŠ›

### 3. **å¤šæ¨¡å‹ç­–ç•¥**
- **Qwen2.5-7B** çµåˆæ¨ç†éˆï¼ˆæœ€ä½³æ€§èƒ½ï¼‰
- **Qwen2.5-14B** ç„¡æ¨ç†éˆï¼ˆåŸºæº–æ¯”è¼ƒï¼‰
- **DeepSeek-R1-14B** æ··åˆæ–¹æ³•ï¼ˆå¯¦é©—æ€§ï¼‰

## ğŸ“ ç›®éŒ„çµæ§‹

```
kaggle-2-reasoning-llm-sft/
â”œâ”€â”€ README.md                    # é€™ä»½ç¶œåˆæŒ‡å—
â”œâ”€â”€ requirements.txt             # Pythonç›¸ä¾å¥—ä»¶
â”œâ”€â”€ data/                        # è¨“ç·´æ•¸æ“šæ¨£æœ¬
â”‚   â”œâ”€â”€ sample_train_data.jsonl
â”‚   â”œâ”€â”€ sample_train_data_reasoning.jsonl
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ scripts/                     # æŒ‰åŠŸèƒ½çµ„ç¹”çš„æ ¸å¿ƒè…³æœ¬
â”‚   â”œâ”€â”€ training/               # æ¨¡å‹è¨“ç·´è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ qwen_finetune_reasoning.py
â”‚   â”‚   â”œâ”€â”€ qwen_finetune_without_reasoning.py
â”‚   â”‚   â”œâ”€â”€ deepseek_finetune_reasoning.py
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ inference/              # é æ¸¬èˆ‡æ¨ç†è…³æœ¬
â”‚   â”‚   â”œâ”€â”€ predict_test_reasoning_data_qwen2.5.py
â”‚   â”‚   â”œâ”€â”€ predict_test_reasoning_data_deepseek.py
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•¸èˆ‡é…ç½®
â”‚       â”œâ”€â”€ clean_data.py
â”‚       â”œâ”€â”€ config.py
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ n8n_workflow/              # è‡ªå‹•åŒ–æ•¸æ“šç”Ÿæˆç³»çµ±
â”‚   â”œâ”€â”€ DL_data_prepare_muti_topics_gen_repeat.json
â”‚   â”œâ”€â”€ WORKFLOW_DOCUMENTATION.md
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ models/                     # æ¨¡å‹é…ç½®èˆ‡å…ƒæ•¸æ“š
â”‚   â”œâ”€â”€ model_config.json
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ submission/                 # ç«¶è³½æäº¤æª”æ¡ˆ
â”‚   â”œâ”€â”€ submission_best_deepseek.csv
â”‚   â”œâ”€â”€ submission_reasoning0525.csv
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ docs/                      # ç¶œåˆæ–‡æª”
â”‚   â”œâ”€â”€ TECHNICAL_REPORT.md
â”‚   â”œâ”€â”€ PERFORMANCE_ANALYSIS.md
â”‚   â”œâ”€â”€ USAGE_GUIDE.md
â”‚   â””â”€â”€ TRAINING_GUIDE.md
â””â”€â”€ images/                    # è¦–è¦ºåŒ–åœ–è¡¨
    â”œâ”€â”€ n8n_workflow_visualization.png
    â””â”€â”€ README.md
```

## ğŸ› ï¸ å¿«é€Ÿé–‹å§‹

### ç³»çµ±éœ€æ±‚

```bash
# ç¡¬é«”éœ€æ±‚
- GPU: RTX 4090 æˆ–åŒç­‰ç´šï¼ˆå»ºè­°24GB+ VRAMï¼‰
- è¨˜æ†¶é«”: 32GB+ ç³»çµ±è¨˜æ†¶é«”
- å„²å­˜ç©ºé–“: 50GB+ å¯ç”¨ç©ºé–“

# è»Ÿé«”éœ€æ±‚
- Python 3.8+
- CUDA 11.8+
- PyTorch 2.0+
```

### å®‰è£

```bash
# å…‹éš†å„²å­˜åº«
git clone https://github.com/Deep-Learning-NYCU/kaggle-2-reasoning-llm-sft-with-reasoning-information-Ray-Tsai-0214.git
cd kaggle-2-reasoning-llm-sft-with-reasoning-information-Ray-Tsai-0214

# å®‰è£ç›¸ä¾å¥—ä»¶
pip install -r requirements.txt

# è¨­å®šHuggingFaceèªè­‰ï¼ˆå¯é¸ï¼‰
huggingface-cli login
```

### è¨“ç·´

```bash
# è¨“ç·´Qwen2.5çµåˆæ¨ç†éˆï¼ˆå»ºè­°ï¼‰
python scripts/training/qwen_finetune_reasoning.py

# è¨“ç·´ç„¡æ¨ç†éˆçš„åŸºæº–æ¨¡å‹
python scripts/training/qwen_finetune_without_reasoning.py

# è¨“ç·´DeepSeekæ¨¡å‹è®Šé«”
python scripts/training/deepseek_finetune_reasoning.py
```

### æ¨ç†

```bash
# ä½¿ç”¨Qwen2.5æ¨ç†æ¨¡å‹ç”Ÿæˆé æ¸¬
python scripts/inference/predict_test_reasoning_data_qwen2.5.py

# ä½¿ç”¨DeepSeekæ¨¡å‹ç”Ÿæˆé æ¸¬
python scripts/inference/predict_test_reasoning_data_deepseek.py
```

## ğŸ”„ N8N è‡ªå‹•åŒ–æ•¸æ“šç”Ÿæˆ

æˆ‘çš„çªç ´æ€§å‰µæ–°ï¼šä¸€å€‹å®Œå…¨è‡ªå‹•åŒ–çš„ç³»çµ±ï¼Œç”¨æ–¼ç”Ÿæˆé«˜å“è³ªä¸­æ–‡æ¨ç†æ•¸æ“šã€‚

### å·¥ä½œæµç¨‹æ¶æ§‹

![N8Nå·¥ä½œæµç¨‹è¦–è¦ºåŒ–](images/n8n_workflow_visualization.png)

### ä¸»è¦ç‰¹è‰²

- **15å€‹æ•æ„Ÿä¸»é¡Œ**: ç§‘æŠ€å€«ç†ã€ç¶“æ¿Ÿç™¼å±•ã€ç’°å¢ƒä¿è­·ã€æ•™è‚²é«”ç³»ã€ç¶²çµ¡å®‰å…¨ã€æ³•å¾‹åˆ¶åº¦ã€äººæ¬Šè­°é¡Œã€æ”¿æ²»æ²»ç†ã€è¨€è«–è‡ªç”±ã€å®—æ•™æ–‡åŒ–ã€æ°‘æ—é—œä¿‚ã€åœ°å€è‡ªæ²»ã€åœ‹éš›é—œä¿‚ã€ç¤¾æœƒå•é¡Œã€æ­·å²äº‹ä»¶
- **3å€‹é›£åº¦ç­‰ç´š**: åŸºç¤ã€ä¸­ç´šã€é«˜ç´š
- **5ç¨®å•é¡Œé¡å‹**: äº‹å¯¦æ€§ã€æ¦‚å¿µæ€§ã€åˆ†ææ€§ã€æ¯”è¼ƒæ€§ã€è©•ä¼°æ€§
- **çµæ§‹åŒ–XMLè¼¸å‡º**: ä¸€è‡´çš„æ¨ç†éˆæ ¼å¼

### æ¨ç†éˆçµæ§‹

```xml
<question>å•é¡Œå…§å®¹</question>
<think>åˆæ­¥äº‹å¯¦è€ƒé‡èˆ‡èƒŒæ™¯</think>
<reasoning>
step 1: åˆ†æå•é¡Œçš„æœ¬è³ª...
step 2: è€ƒæ…®æ­·å²èƒŒæ™¯...
step 3: è©•ä¼°ä¸åŒè§€é»...
</reasoning>
<reflection>å°æ¨ç†éç¨‹çš„åæ€èˆ‡ä¸­ç«‹æ€§æª¢æŸ¥</reflection>
<adjustment>å¦‚æœ‰éœ€è¦çš„å¯èƒ½èª¿æ•´</adjustment>
<output>æ­£ç¢ºç­”æ¡ˆå­—æ¯</output>
```

### æ€§èƒ½æŒ‡æ¨™

- **ç”Ÿæˆé€Ÿåº¦**: æ¯åˆ†é˜1.5-2.0å€‹å•é¡Œ
- **æ•¸æ“šå“è³ª**: 95%ä»¥ä¸Šé©—è­‰é€šéç‡
- **ç³»çµ±å¯é æ€§**: æ”¯æ´24å°æ™‚é€£çºŒé‹è¡Œ
- **ä¸­ç«‹æ€§ä¿è­‰**: å¤šå±¤åè¦‹æª¢æŸ¥æ©Ÿåˆ¶

## ğŸ“Š æ€§èƒ½åˆ†æ

### ç«¶è³½æˆæœè©³è§£

| æŒ‡æ¨™ | åˆ†æ•¸ | æ’å | åˆ†æ |
|--------|-------|------|----------|
| Private Score | 0.72043 | #30 | åœ¨æœªè¦‹æ•¸æ“šä¸Šè¡¨ç¾å¼·å‹çš„æ³›åŒ–èƒ½åŠ› |
| Public Score | 0.47177 | - | åœ¨å…¬é–‹æ’è¡Œæ¦œä¸Šçš„ä¿å®ˆè¡¨ç¾ |
| **å·®è·åˆ†æ** | +0.25 | - | **é¡¯è‘—æå‡è­‰æ˜æ¨ç†éˆçš„æœ‰æ•ˆæ€§** |

### é—œéµæ´å¯Ÿ

1. **æ¨ç†éˆå½±éŸ¿**: Privateèˆ‡Publicåˆ†æ•¸çš„é¡¯è‘—å·®è·é©—è­‰äº†æˆ‘çš„çµæ§‹åŒ–æ¨ç†æ–¹æ³•
2. **æ³›åŒ–èƒ½åŠ›**: åœ¨Privateæ¸¬è©¦é›†ä¸Šçš„å¼·å‹è¡¨ç¾è¡¨æ˜å·²å­¸æœƒç©©å¥çš„æ¨ç†æ¨¡å¼
3. **ä¸­ç«‹æ€§æˆå°±**: æˆåŠŸä»¥å¹³è¡¡è§€é»è™•ç†æ•æ„Ÿæ”¿æ²»è­°é¡Œ

## ğŸ¯ æŠ€è¡“è²¢ç»

### 1. **è‡ªå‹•åŒ–æ¨ç†æ•¸æ“šç”Ÿæˆ**
- é¦–æ¬¡å°‡N8Nå·¥ä½œæµç¨‹æ‡‰ç”¨æ–¼å¤§è¦æ¨¡ä¸­æ–‡æ•æ„Ÿè­°é¡Œæ•¸æ“šç”Ÿæˆ
- ç³»çµ±æ€§æ¶µè“‹15å€‹æ•æ„Ÿæ”¿æ²»ä¸»é¡Œ
- æ”¯æ´æŒçºŒæ•¸æ“šç”Ÿç”¢çš„å¯æ“´å±•æ¶æ§‹

### 2. **çµæ§‹åŒ–æ¨ç†éˆ**
- å‰µæ–°çš„XMLæ ¼å¼æ¨ç†çµæ§‹
- å¤šæ­¥é©ŸèªçŸ¥éç¨‹å»ºæ¨¡
- å°ˆæ³¨ä¸­ç«‹æ€§çš„è¨“ç·´æ–¹æ³•

### 3. **æ³›åŒ–èƒ½åŠ›é©—è­‰**
- Privateåˆ†æ•¸é¡¯è‘—è¶…è¶ŠPublicåˆ†æ•¸
- è­‰æ˜æ¨ç†éˆè¨“ç·´æœ‰æ•ˆæ€§çš„æ¦‚å¿µé©—è­‰
- ç‚ºå¾ŒçºŒKaggle #3çš„GRPOè¨“ç·´å¥ å®šåŸºç¤

## ğŸ“š æ–‡æª”

- [**æŠ€è¡“å ±å‘Š**](docs/TECHNICAL_REPORT.md) - è©³ç´°æ–¹æ³•è«–èˆ‡çµæœ
- [**æ€§èƒ½åˆ†æ**](docs/PERFORMANCE_ANALYSIS.md) - ç«¶è³½æŒ‡æ¨™èˆ‡æ´å¯Ÿ  
- [**ä½¿ç”¨æŒ‡å—**](docs/USAGE_GUIDE.md) - é€æ­¥æ“ä½œèªªæ˜
- [**è¨“ç·´æŒ‡å—**](docs/TRAINING_GUIDE.md) - å®Œæ•´è¨“ç·´ç¨‹åº
- [**å·¥ä½œæµç¨‹æ–‡æª”**](n8n_workflow/WORKFLOW_DOCUMENTATION.md) - N8Nç³»çµ±è©³æƒ…

## ğŸ”§ ç’°å¢ƒè¨­å®š

### è¨“ç·´ç’°å¢ƒ
```bash
# æ ¸å¿ƒç›¸ä¾å¥—ä»¶
torch>=2.0.0
transformers>=4.36.0
datasets>=2.14.0
accelerate>=0.20.0
peft>=0.6.0

# å¯é¸ï¼šWeights & Biasesç”¨æ–¼è¿½è¹¤
wandb>=0.15.0
```

### N8Nå·¥ä½œæµç¨‹ç’°å¢ƒ
```bash
# N8Nå¹³å°ï¼ˆè‡ªæ¶æˆ–é›²ç«¯ï¼‰
# OpenAI APIé‡‘é‘°ï¼ˆå»ºè­°GPT-4ï¼‰
# è¶³å¤ çš„APIé…é¡ç”¨æ–¼æŒçºŒç”Ÿæˆ
# ç©©å®šçš„ç¶²è·¯é€£æ¥ä»¥æ”¯æ´24/7é‹è¡Œ
```

**ğŸš€ é€™é …å·¥ä½œç‚ºKaggle #3çš„GRPOè¨“ç·´å¥ å®šäº†åŸºç¤ï¼Œå±•ç¾äº†è‡ªå‹•åŒ–æ¨ç†æ•¸æ“šç”Ÿæˆå’Œçµæ§‹åŒ–è¨“ç·´æ–¹æ³•å°ä¸­æ–‡å¤§èªè¨€æ¨¡å‹çš„å¼·å¤§æ½›åŠ›ã€‚**
